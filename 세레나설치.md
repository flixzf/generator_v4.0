# Serena MCP 서버 설치 가이드

> Windows PowerShell 기준 설치 가이드

## 1단계: UV 설치

```bash
pip install uv
```

설치 확인:
```bash
uv --version
```

예상 출력: `uv 0.8.22 (ade2bdbd2 2025-09-23)`

---

## 2단계: Serena 설치

```bash
uv tool install git+https://github.com/oraios/serena
```

설치 완료 메시지:
```
Installed 57 packages in 1.78s
Installed 3 executables: index-project, serena, serena-mcp-server
```

---

## 3단계: PATH 업데이트 (선택사항)

```powershell
uv tool update-shell
```

이후 PowerShell 재시작

---

## 4단계: Claude MCP에 Serena 추가

### 방법 1: CLI 명령 (간단)

프로젝트 디렉토리로 이동 후:

```powershell
claude mcp add serena --scope project -- serena-mcp-server
```

성공 메시지:
```
Added stdio MCP server serena with command: serena-mcp-server to project config
File modified: D:\code\프로젝트경로\.mcp.json
```

---

## 5단계: 설정 파일 수정 (옵션 추가)

`.mcp.json` 파일을 열어서 다음과 같이 수정:

```json
{
  "mcpServers": {
    "serena": {
      "type": "stdio",
      "command": "serena-mcp-server",
      "args": [
        "--transport",
        "stdio",
        "--context",
        "ide-assistant",
        "--project",
        "D:\\code\\프로젝트\\경로"
      ],
      "env": {}
    }
  }
}
```

**주의**: `--project` 경로는 백슬래시 이스케이프(`\\`) 사용

---

## 6단계: Claude Code 재시작

Claude Code를 재시작하면 Serena MCP 서버가 활성화됩니다.

---

## 트러블슈팅

### 문제 1: `pipx` 명령을 찾을 수 없음
→ `pipx` 대신 `pip`로 직접 설치하세요: `pip install uv`

### 문제 2: `--from` 옵션 에러
→ 최신 `uv`에서는 `--from` 대신 직접 git URL 사용

### 문제 3: `--context` 옵션 에러 (claude mcp add 실행 시)
→ 먼저 기본 설정으로 추가 후, `.mcp.json` 파일을 직접 수정

### 문제 4: PATH에 없다는 경고
→ `uv tool update-shell` 실행 후 터미널 재시작

---

## 유용한 명령어

### Serena 도움말 확인
```bash
serena-mcp-server --help
```

### 설치된 도구 확인
```bash
uv tool list
```

### Serena 업데이트
```bash
uv tool upgrade serena-agent
```

### Serena 제거
```bash
uv tool uninstall serena-agent
```

---

## 참고사항

- `.mcp.json` 파일은 로컬 설정이므로 `.gitignore`에 추가 권장
- Serena는 프로젝트 컨텍스트 인식으로 더 나은 코드 분석 제공
- `--context` 옵션: `desktop-app` (기본값), `ide-assistant` (IDE 전용)

---

## 설치 위치

- **UV 도구**: `C:\Users\사용자명\.local\bin`
- **실행 파일**:
  - `serena.exe`
  - `serena-mcp-server.exe`
  - `index-project.exe`

---

## 다른 컴퓨터에 빠르게 설치하기

```powershell
# 한 번에 실행
pip install uv
uv tool install git+https://github.com/oraios/serena

# 프로젝트 디렉토리에서
cd "D:\프로젝트\경로"
claude mcp add serena --scope project -- serena-mcp-server

# .mcp.json 수정 (args 추가)
# Claude Code 재시작
```

끝! 🎉